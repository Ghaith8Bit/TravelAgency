(function () {
    const form = document.querySelector('#usersFilterForm');
    const submitBtn = form.querySelector('button[type="submit"]');
    const resetBtn = form.querySelector('button[type="reset"]');

    submitBtn.addEventListener('click', (event) => {
        event.preventDefault();

        const nameValue = form.querySelector('#nameFilter').value;
        const emailValue = form.querySelector('#emailFilter').value;
        const dateOperator = form.querySelector('#dateFilter').value;
        const dateValue = form.querySelector('#dateFilterValue').value;
        const roleValue = form.querySelector('#roleFilter').value;

        let queryString = '';

        if (nameValue) {
            queryString += `name[like]=${nameValue}&`;
        }
        if (emailValue) {
            queryString += `email[like]=${emailValue}&`;
        }
        if (dateValue) {
            queryString += `created_at[${dateOperator}]=${dateValue}&`;
        }
        if (roleValue) {
            queryString += `role_id[eq]=${roleValue}&`;
        }

        // Remove the trailing '&' if there is one
        if (queryString.endsWith('&')) {
            queryString = queryString.slice(0, -1);
        }

        window.location.href = `http://localhost:8000/dashboard/users?${queryString}`;
    });

    resetBtn.addEventListener('click', () => {
        // Clear the form fields
        form.querySelector('#nameFilter').value = '';
        form.querySelector('#emailFilter').value = '';
        form.querySelector('#dateFilter').value = '';
        form.querySelector('#dateFilterValue').value = '';
        form.querySelector('#roleFilter').value = '';
    });
})();
