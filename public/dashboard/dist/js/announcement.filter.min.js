(function () {
    const form = document.querySelector('#announcementsFilterForm');
    const submitBtn = form.querySelector('button[type="submit"]');
    const resetBtn = form.querySelector('button[type="reset"]');

    submitBtn.addEventListener('click', (event) => {
        event.preventDefault();

        const titleValue = form.querySelector('#titleFilter').value;
        const dateOperator = form.querySelector('#dateFilter').value;
        const dateValue = form.querySelector('#dateFilterValue').value;
        const statusValue = form.querySelector('#statusFilter').value;

        let queryString = '';

        if (titleValue) {
            queryString += `title[like]=${titleValue}&`;
        }
        if (dateValue) {
            queryString += `created_at[${dateOperator}]=${dateValue}&`;
        }
        if (statusValue) {
            queryString += `is_published[eq]=${statusValue}&`;
        }

        // Remove the trailing '&' if there is one
        if (queryString.endsWith('&')) {
            queryString = queryString.slice(0, -1);
        }

        window.location.href = `http://localhost:8000/dashboard/announcements?${queryString}`;
    });

    resetBtn.addEventListener('click', () => {
        // Clear the form fields
        form.querySelector('#titleFilter').value = '';
        form.querySelector('#dateFilter').value = '';
        form.querySelector('#dateFilterValue').value = '';
        form.querySelector('#statusFilter').value = '';
    });
})();
